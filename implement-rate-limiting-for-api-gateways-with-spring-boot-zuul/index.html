<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Implement rate limiting for API Gateways with Spring boot + Zuul | Dev Reads</title><meta name="description" content="This article is part of a series where we discuss the importance of API Gateways with Spring boot and Netflix Zuul. Previous article How to build an API-Gateway with Netflix Zuul + Spring BootWhen it comes to API Gateways, it is important to keep your services under the load they can bear. This can be done in two ways."><meta name="robots" content="index, follow"><meta name="generator" content="Publii Open-Source CMS for Static Site"><link rel="canonical" href="https://devreads.xyz/implement-rate-limiting-for-api-gateways-with-spring-boot-zuul/"><link rel="amphtml" href="https://devreads.xyz/amp/implement-rate-limiting-for-api-gateways-with-spring-boot-zuul/"><link rel="alternate" type="application/atom+xml" href="https://devreads.xyz/feed.xml"><link rel="alternate" type="application/json" href="https://devreads.xyz/feed.json"><meta property="og:title" content="Implement rate limiting for API Gateways with Spring boot + Zuul"><meta property="og:image" content="https://devreads.xyz/media/posts/6/Copy-of-https___devreads.xyz.jpg"><meta property="og:site_name" content="Dev Reads"><meta property="og:description" content="This article is part of a series where we discuss the importance of API Gateways with Spring boot and Netflix Zuul. Previous article How to build an API-Gateway with Netflix Zuul + Spring BootWhen it comes to API Gateways, it is important to keep your services under the load they can bear. This can be done in two ways."><meta property="og:url" content="https://devreads.xyz/implement-rate-limiting-for-api-gateways-with-spring-boot-zuul/"><meta property="og:type" content="article"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content="@dev_reads"><meta name="twitter:title" content="Implement rate limiting for API Gateways with Spring boot + Zuul"><meta name="twitter:description" content="This article is part of a series where we discuss the importance of API Gateways with Spring boot and Netflix Zuul. Previous article How to build an API-Gateway with Netflix Zuul + Spring BootWhen it comes to API Gateways, it is important to keep your services under the load they can bear. This can be done in two ways."><meta name="twitter:image" content="https://devreads.xyz/media/posts/6/Copy-of-https___devreads.xyz.jpg"><link rel="shortcut icon" href="https://devreads.xyz/media/website/favicon.ico" type="image/x-icon"><style>:root {
                --body-font: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Fira Sans", "Droid Sans", "Helvetica Neue", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
                --heading-font: var(--body-font);
                --post-entry-font: var(--body-font);
                --logo-font: var(--body-font);
                --menu-font: var(--body-font)
            }</style><link rel="stylesheet" href="https://devreads.xyz/assets/css/style.css?v=6dc8a87d2853b509bc0fffe88ff485c8"><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","mainEntityOfPage":{"@type":"WebPage","@id":"https://devreads.xyz/implement-rate-limiting-for-api-gateways-with-spring-boot-zuul/"},"headline":"Implement rate limiting for API Gateways with Spring boot + Zuul","datePublished":"2019-07-19T23:36","dateModified":"2019-07-21T08:47","image":{"@type":"ImageObject","url":"https://devreads.xyz/media/posts/6/Copy-of-https___devreads.xyz.jpg","height":680,"width":1360},"description":"<p class=\"dropcap\">This article is part of a series where we discuss the importance of API Gateways with Spring boot and Netflix Zuul. Previous article <a href=\"https://devreads.xyz/how-to-build-an-api-gateway-with-netflix-zuul-spring-boot/\" title=\"How to build an API-Gateway with Netflix Zuul + Spring Boot\">How to build an API-Gateway with Netflix Zuul + Spring Boot</a></p>\n<p>When it comes to API Gateways, it is important to keep your services under the load they can bear. This can be done in two ways.</p>\n","author":{"@type":"Person","name":"Guides"},"publisher":{"@type":"Organization","name":"DevReads Team"}}</script><script src="https://devreads.xyz/assets/js/ls.object-fit.min.js?v=cdedd9262bb7b299d0ebe1deaea5b924"></script><script async src="https://devreads.xyz/assets/js/lazysizes.min.js?v=d8513e7860f747ccf55c52308943beab"></script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-143380256-1"></script><script>window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-143380256-1');</script><script id="pixel-script-poptin" src="https://cdn.popt.in/pixel.js?id=6f5fc8505eda3" async="true"></script><meta name="p:domain_verify" content="45372e5404ed9628425ee92033c72827"></head><body><header class="topbar" id="js-header"><div class="topbar__inner"><a class="logo" href="https://devreads.xyz/">Dev Reads</a><nav class="navbar"><button class="navbar__toggle" aria-label="Menu" aria-haspopup="true" aria-expanded="false"><span class="navbar__toggle-box"><span class="navbar__toggle-inner">Menu</span></span></button><ul class="navbar__menu"><li class="has-submenu"><a href="https://devreads.xyz/https://devreads.xyz/tools/css-gen2/?latest" title="CSS Code Generator" target="_self" aria-haspopup="true">Tools</a><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://devreads.xyz/media/files/tools/cssgen/" title="CSS code generator by DevReads" target="_self">CSS Generator</a></li><li><a href="https://devreads.xyz/media/files/tools/gradientgenerator/" target="_self">Gradient Generator</a></li></ul></li><li class="has-submenu"><span class="is-separator" aria-haspopup="true">Topics</span><ul class="navbar__submenu level-2" aria-hidden="true"><li><a href="https://devreads.xyz/articles/java/" target="_self">Java</a></li><li><a href="https://devreads.xyz/articles/spring-boot/" target="_self">Spring Boot</a></li><li><a href="https://devreads.xyz/articles/css/" target="_self">CSS</a></li><li><a href="https://devreads.xyz/articles/hosting/" target="_self">Hosting</a></li><li><a href="https://devreads.xyz/articles/unix/" target="_self">Unix</a></li></ul></li><li><a href="https://devreads.xyz/about-us/" target="_self">About Us</a></li><li><a href="https://devreads.xyz/contact-us/" target="_self">Contact Us</a></li><li><a href="https://devreads.xyz/privacy-policy/" target="_self">Privacy policy</a></li><li><a href="https://devreads.xyz/dmca-removal/" target="_self">DMCA</a></li></ul></nav></div></header><div class="content"><div class="infobar"><div class="infobar__update">Last Updated: <time datetime="2020-03-02T17:33">March 2, 2020</time></div><div class="infobar__search"><form action="https://devreads.xyz/search.html"><input type="search" name="q" placeholder=" search..."> <button type="submit" aria-label="Search"><svg width="15px" height="14px"><use xlink:href="https://devreads.xyz/assets/svg/svg-map.svg#search"/></svg></button></form></div></div><main class="main main--full"><article class="post"><figure class="post__featured-image" style="padding-bottom: calc(680/1360 * 100%)"><img class="lazyload" data-src="https://devreads.xyz/media/posts/6/Copy-of-https___devreads.xyz.jpg" data-srcset="https://devreads.xyz/media/posts/6/responsive/Copy-of-https___devreads.xyz-xs.jpg 300w ,https://devreads.xyz/media/posts/6/responsive/Copy-of-https___devreads.xyz-sm.jpg 480w ,https://devreads.xyz/media/posts/6/responsive/Copy-of-https___devreads.xyz-md.jpg 768w ,https://devreads.xyz/media/posts/6/responsive/Copy-of-https___devreads.xyz-lg.jpg 1024w ,https://devreads.xyz/media/posts/6/responsive/Copy-of-https___devreads.xyz-xl.jpg 1360w ,https://devreads.xyz/media/posts/6/responsive/Copy-of-https___devreads.xyz-2xl.jpg 1600w" data-aspectratio="2" data-sizes="auto" alt="" height="680" width="1360"></figure><header class="u-header post__header"><h1>Implement rate limiting for API Gateways with Spring boot + Zuul</h1><div class="u-header__meta u-small"><div><time datetime="2019-07-19T23:36">July 19, 2019 </time><a href="https://devreads.xyz/articles/java/" class="u-tag u-tag--1">Java</a></div></div></header><div class="post__entry u-inner"><p class="dropcap">This article is part of a series where we discuss the importance of API Gateways with Spring boot and Netflix Zuul. Previous article <a href="https://devreads.xyz/how-to-build-an-api-gateway-with-netflix-zuul-spring-boot/" title="How to build an API-Gateway with Netflix Zuul + Spring Boot">How to build an API-Gateway with Netflix Zuul + Spring Boot</a></p><p>When it comes to API Gateways, it is important to keep your services under the load they can bear. This can be done in two ways.</p><ol><li>Scale the services and balance load.</li><li>Limit the rate of requests.</li></ol><p>Both of the above features are possible to implement with API Gateways, but in this article we are discussing about the later. Most surprisingly, <a href="https://github.com/Netflix/zuul" title="Netflix Zuul" target="_blank" rel="noopener noreferrer">Netflix Zuul</a> official documentation does not cover how to implement rate limiting.</p><h3>How to add rate limiting to Zuul</h3><p>We found an awesome library called <a href="https://github.com/marcosbarbero/spring-cloud-zuul-ratelimit" title="spring cloud zuul ratelimit" target="_blank" rel="noopener noreferrer">spring-cloud-zuul-ratelimit</a> which you can use to easily implement rate limiting in your Spring boot application. There are six rate limiting stratergies supported by this library.</p><table class="responsive"><tbody><tr><td>Authenticated User</td><td>Uses the authenticated username or 'anonymous'</td></tr><tr><td>Request Origin</td><td>Uses the user origin request</td></tr><tr><td>URL</td><td>Uses the request path of the downstream service</td></tr><tr><td>ROLE</td><td>Uses the authenticated user roles</td></tr><tr><td>Request method</td><td>Uses the HTTP request method</td></tr><tr><td>Global configuration per service</td><td>This one does not validate the request Origin, Authenticated User or URI.<br>To use this approach just don’t set param 'type'</td></tr></tbody></table><p class="msg msg--highlight">It is also possible to combine Authenticated User, Request Origin, URL, ROLE and Request Method just adding multiple values to the list.</p><p>To start with, add the following dependency to your <code>pom</code></p><pre><code class="language-xml">&lt;<span class="pl-ent">dependency</span>&gt;
    &lt;<span class="pl-ent">groupId</span>&gt;com.marcosbarbero.cloud&lt;/<span class="pl-ent">groupId</span>&gt;
    &lt;<span class="pl-ent">artifactId</span>&gt;spring-cloud-zuul-ratelimit&lt;/<span class="pl-ent">artifactId</span>&gt;
    &lt;<span class="pl-ent">version</span>&gt;LATEST&lt;/<span class="pl-ent">version</span>&gt;
&lt;/<span class="pl-ent">dependency</span>&gt;</code></pre><p> Then chose one of the following storage backends which will be used by this library to keep track of the requests.</p><ul><li><a href="https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html">In Memory</a></li><li><a href="https://www.consul.io/">Consul</a></li><li><a href="https://redis.io/">Redis</a></li><li>JDBC (using spring-data-jpa)</li><li><a href="https://github.com/vladimir-bukhtoyarov/bucket4j">Bucket4j</a><ul><li>JCache</li><li><a href="https://hazelcast.com/">Hazelcast</a></li><li><a href="https://ignite.apache.org/">Ignite</a></li><li><a href="http://infinispan.org/">Infinispan</a></li></ul></li></ul><p>Depending of the chosen backend, you have to add a different dependency to the pom. All the dependency information can be found in their github <a href="https://github.com/marcosbarbero/spring-cloud-zuul-ratelimit#usage" title="README" target="_blank" rel="noopener noreferrer">README</a>.</p><p>Then configure the rates for each endpoint that you want to control. This can be done via either <code>properties</code> file or <code>yml</code> configuration. Sample yml file can be seen below. All the supported properties can be found <a href="https://github.com/marcosbarbero/spring-cloud-zuul-ratelimit#common-application-properties" title="documentation" target="_blank" rel="noopener noreferrer">here</a>.</p><script src="https://gist.github.com/devreads/64953c7613ae7de59f3fdeb4f1c7eecb.js"></script><p>When one of the endpoints reached their configured rate limit, it will automatically respond with http error code <code><strong>429</strong> Too Many Requests</code> for subsequent requests until the rate limit comes back to the allowed range. This will prevent the underlying service from being overload in a peak time or under a <a href="https://en.wikipedia.org/wiki/Denial-of-service_attack" title="DoS attack" target="_blank" rel="noopener noreferrer">DoS attack</a>.</p></div><aside class="post__aside"><div class="post__share"><a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fdevreads.xyz%2Fimplement-rate-limiting-for-api-gateways-with-spring-boot-zuul%2F" class="js-share facebook" title="Share with Facebook" rel="nofollow noopener noreferrer" aria-label="Share with Facebook"><svg class="u-icon"><use xlink:href="https://devreads.xyz/assets/svg/svg-map.svg#facebook"/></svg> </a><a href="https://twitter.com/share?url=https%3A%2F%2Fdevreads.xyz%2Fimplement-rate-limiting-for-api-gateways-with-spring-boot-zuul%2F&amp;via=dev_reads&amp;text=Implement%20rate%20limiting%20for%20API%20Gateways%20with%20Spring%20boot%20%2B%20Zuul" class="js-share twitter" title="Share with Twitter" rel="nofollow noopener noreferrer" aria-label="Share with Twitter"><svg class="u-icon"><use xlink:href="https://devreads.xyz/assets/svg/svg-map.svg#twitter"/></svg> </a><a href="http://www.linkedin.com/shareArticle?url=https%3A%2F%2Fdevreads.xyz%2Fimplement-rate-limiting-for-api-gateways-with-spring-boot-zuul%2F&amp;title=Implement%20rate%20limiting%20for%20API%20Gateways%20with%20Spring%20boot%20%2B%20Zuul" class="js-share linkedin" title="Share with LinkedIn" rel="nofollow noopener noreferrer" aria-label="Share with LinkedIn"><svg class="u-icon"><use xlink:href="https://devreads.xyz/assets/svg/svg-map.svg#linkedin"/></svg></a></div></aside><footer class="post__footer"><ul class="post__tag box"><li><a href="https://devreads.xyz/articles/java/" class="u-tag u-tag--1" title="Java">Java</a></li><li><a href="https://devreads.xyz/articles/micro-services/" class="u-tag u-tag--1" title="Micro Services">Micro Services</a></li><li><a href="https://devreads.xyz/articles/spring-boot/" class="u-tag u-tag--1" title="Spring Boot">Spring Boot</a></li><li><a href="https://devreads.xyz/articles/zuul/" class="u-tag u-tag--1" title="Zuul">Zuul</a></li></ul><nav class="post__nav box"><div class="post__nav__prev"><a href="https://devreads.xyz/how-to-investigate-high-cpu-utilization-of-java-processes/" class="post__nav__link" rel="prev"><img class="lazyload" data-src="https://devreads.xyz/media/posts/5/responsive/https___devreads.xyz-xs.jpg" data-srcset="https://devreads.xyz/media/posts/5/responsive/https___devreads.xyz-xs.jpg" data-expand="300" alt=""><div class="u-small">Previous Post<h5>How to Investigate high CPU utilization of Java processes</h5></div></a></div><div class="post__nav__next"><a href="https://devreads.xyz/detailed-guide-to-build-and-publish-website-for-free/" class="post__nav__link" rel="next"><div class="u-small">Next Post<h5>Detailed guide to build and publish a website for FREE</h5></div><img class="lazyload" data-src="https://devreads.xyz/media/posts/7/responsive/Copy-of-Copy-of-https___devreads.xyz-xs.jpg" data-srcset="https://devreads.xyz/media/posts/7/responsive/Copy-of-Copy-of-https___devreads.xyz-xs.jpg" data-expand="300" alt=""></a></div></nav><div class="post__related box"><h3 class="box__title">Related posts</h3><div class="post__related-wrap"><figure class="post__related-item"><a href="https://devreads.xyz/hotmail-login-not-working-how-to-reset-password-without-a-phone/" class="post__related-image-link"><img class="lazyload" data-src="https://devreads.xyz/media/posts/9/Copy-of-Copy-of-Copy-of-https___devreads.xyz.jpg" data-srcset="https://devreads.xyz/media/posts/9/responsive/Copy-of-Copy-of-Copy-of-https___devreads.xyz-xs.jpg 300w ,https://devreads.xyz/media/posts/9/responsive/Copy-of-Copy-of-Copy-of-https___devreads.xyz-sm.jpg 480w ,https://devreads.xyz/media/posts/9/responsive/Copy-of-Copy-of-Copy-of-https___devreads.xyz-md.jpg 768w ,https://devreads.xyz/media/posts/9/responsive/Copy-of-Copy-of-Copy-of-https___devreads.xyz-lg.jpg 1024w ,https://devreads.xyz/media/posts/9/responsive/Copy-of-Copy-of-Copy-of-https___devreads.xyz-xl.jpg 1360w ,https://devreads.xyz/media/posts/9/responsive/Copy-of-Copy-of-Copy-of-https___devreads.xyz-2xl.jpg 1600w" data-sizes="auto" data-expand="300" alt=""></a><figcaption><h4 class="post__related-title"><a href="https://devreads.xyz/hotmail-login-not-working-how-to-reset-password-without-a-phone/" class="inverse">Hotmail login not working? How to reset password without a phone</a></h4><time datetime="2019-08-26T10:59" class="u-small">August 26, 2019</time></figcaption></figure><figure class="post__related-item"><a href="https://devreads.xyz/how-to-build-an-api-gateway-with-netflix-zuul-spring-boot/" class="post__related-image-link"><img class="lazyload" data-src="https://devreads.xyz/media/posts/3/https___devreads.xyz.jpg" data-srcset="https://devreads.xyz/media/posts/3/responsive/https___devreads.xyz-xs.jpg 300w ,https://devreads.xyz/media/posts/3/responsive/https___devreads.xyz-sm.jpg 480w ,https://devreads.xyz/media/posts/3/responsive/https___devreads.xyz-md.jpg 768w ,https://devreads.xyz/media/posts/3/responsive/https___devreads.xyz-lg.jpg 1024w ,https://devreads.xyz/media/posts/3/responsive/https___devreads.xyz-xl.jpg 1360w ,https://devreads.xyz/media/posts/3/responsive/https___devreads.xyz-2xl.jpg 1600w" data-sizes="auto" data-expand="300" alt=""></a><figcaption><h4 class="post__related-title"><a href="https://devreads.xyz/how-to-build-an-api-gateway-with-netflix-zuul-spring-boot/" class="inverse">How to build an API-Gateway with Netflix Zuul + Spring Boot</a></h4><time datetime="2019-02-01T12:14" class="u-small">February 1, 2019</time></figcaption></figure></div></div></footer></article></main><footer class="footer"><a class="footer__logo" href="https://devreads.xyz/">Dev Reads</a><nav><ul class="footer__nav"></ul></nav><div class="footer__copyright">News | How to | Guides</div></footer></div><script>window.publiiThemeMenuConfig = {    
        mobileMenuMode: 'sidebar',
        animationSpeed: 300,
        submenuWidth: 'auto',
        doubleClickTime: 500,
        mobileMenuExpandableSubmenus: true, 
        relatedContainerForOverlayMenuSelector: '.navbar',
   };</script><script defer="defer" src="https://devreads.xyz/assets/js/scripts.min.js?v=225cfb4a7e546edee710c4f1208e81e2"></script></body></html>